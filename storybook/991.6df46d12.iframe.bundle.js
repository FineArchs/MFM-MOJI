(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[991],{"./node_modules/css-loader/dist/cjs.js??clonedRuleSet-10.use[1]!./node_modules/@storybook/preset-vue3-webpack/node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/@storybook/preset-vue3-webpack/node_modules/vue-loader/dist/index.js??ruleSet[0]!./src/components/icons/File.vue?vue&type=style&index=0&id=7c0df149&scoped=true&lang=css":(module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,"\n.icon[data-v-7c0df149] {\n  display: inline;\n  width: auto;\n  height: 1em;\n  vertical-align: -0.11em;\n  fill: currentColor;\n}\n","",{version:3,sources:["webpack://./src/components/icons/File.vue"],names:[],mappings:";AAMA;EACE,eAAe;EACf,WAAW;EACX,WAAW;EACX,uBAAuB;EACvB,kBAAkB;AACpB",sourcesContent:['<template>\n  \x3c!-- eslint-disable-next-line --\x3e\n  <svg class="icon" xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M8 16h8v2H8zm0-4h8v2H8zm6-10H6c-1.1 0-2 .9-2 2v16c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm4 18H6V4h7v5h5v11z"/></svg>\n</template>\n\n<style scoped>\n.icon {\n  display: inline;\n  width: auto;\n  height: 1em;\n  vertical-align: -0.11em;\n  fill: currentColor;\n}\n</style>\n'],sourceRoot:""}]);const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___},"./node_modules/css-loader/dist/cjs.js??clonedRuleSet-10.use[1]!./node_modules/@storybook/preset-vue3-webpack/node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/@storybook/preset-vue3-webpack/node_modules/vue-loader/dist/index.js??ruleSet[0]!./src/components/inputs/FileSelect.vue?vue&type=style&index=0&id=9c73c30c&scoped=true&lang=css":(module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,"\n.file[data-v-9c73c30c] {\n  margin-top: var(--spacingMedium);\n  font-size: var(--fontSizeMedium);\n  color: var(--fg);\n  user-select: none;\n}\n","",{version:3,sources:["webpack://./src/components/inputs/FileSelect.vue"],names:[],mappings:";AAoEA;EACE,gCAAgC;EAChC,gCAAgC;EAChC,gBAAgB;EAChB,iBAAiB;AACnB",sourcesContent:['<script lang="ts">\nimport { defineComponent } from "vue";\nimport { urlToImg } from "../../utils/canvas";\nimport { loadFileAsBlobURL } from "../../utils/file";\nimport Button from "./Button.vue";\nimport File from "../icons/File.vue";\n\nexport default defineComponent({\n  components: {\n    Button, File,\n  },\n  props: {\n    label: { type: String, default: undefined },\n    type: { type: String, required: true },\n    name: { type: String, default: "" },\n  },\n  emits: [\n    "load",\n  ],\n  data() {\n    return {\n      file: null as File | null,\n    };\n  },\n  computed: {\n    accept(): (string | null) {\n      if (this.type === "img") {\n        return "image/*";\n      } else if (this.type === "font") {\n        return "font/otf,font/ttf,font/woff";\n      } else {\n        return null;\n      }\n    },\n  },\n  methods: {\n    onClick(): void {\n      (this.$refs.input as HTMLInputElement).click();\n    },\n    onChange(e: { target: { files: FileList } }): void {\n      if (e.target.files[0]) {\n        this.file = e.target.files[0];\n        if (this.type === "img") {\n          loadFileAsBlobURL(this.file).then((blobUrl) => {\n            urlToImg(blobUrl, (img) => {\n              if (img.naturalWidth !== 0 && img.naturalHeight !== 0) {\n                this.$emit("load", img);\n              }\n            });\n          });\n        }\n      }\n    },\n  },\n});\n<\/script>\n\n<template>\n  <input ref="input" type="file" style="display: none;" :accept="accept" @change="onChange">\n  <Button type="dashed" :name="name" @click="onClick">\n    <slot />\n  </Button>\n  <div v-if="file" class="file">\n    <File /> {{ file.name }}\n  </div>\n</template>\n\n<style scoped>\n.file {\n  margin-top: var(--spacingMedium);\n  font-size: var(--fontSizeMedium);\n  color: var(--fg);\n  user-select: none;\n}\n</style>\n'],sourceRoot:""}]);const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___},"./node_modules/jszip/dist sync recursive":module=>{function webpackEmptyContext(req){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}webpackEmptyContext.keys=()=>[],webpackEmptyContext.resolve=webpackEmptyContext,webpackEmptyContext.id="./node_modules/jszip/dist sync recursive",module.exports=webpackEmptyContext},"./src/utils/canvas.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{CH:()=>cutoutCanvasIntoCells,UO:()=>scaleCentered,dU:()=>shrinkCanvas,fg:()=>cropCanvas,mV:()=>flipContext,oh:()=>urlToImg,sH:()=>mergeImages});const scaleCentered=(ctx,cellWidth,cellHeight,hScale,vScale)=>{ctx.transform(hScale,0,0,vScale,cellWidth*(1-hScale)/2,cellHeight*(1-vScale)/2)},flipContext=(ctx,width)=>{ctx.translate(width,0),ctx.scale(-1,1)},cropCanvas=(source,left,top,w,h,fillStyle)=>{const target=document.createElement("canvas");target.width=w,target.height=h;const ctx=target.getContext("2d");if(!ctx)throw new Error("Failed to get rendering context.");return fillStyle&&(ctx.fillStyle=fillStyle,ctx.fillRect(0,0,w,h)),ctx.drawImage(source,left,top,w,h,0,0,w,h),target},shrinkCanvas=source=>{const ctx=source.getContext("2d");if(!ctx)throw new Error("Failed to get rendering context.");const{data}=ctx.getImageData(0,0,source.width,source.height);let top=0;topLoop:for(;top<source.height;top+=1)for(let x=0;x<source.width;x+=1)if(data[4*(top*source.width+x)+3])break topLoop;let bottom=source.height-1;bottomLoop:for(;bottom>=top;bottom-=1)for(let x=0;x<source.width;x+=1)if(data[4*(bottom*source.width+x)+3])break bottomLoop;let left=0;leftLoop:for(;left<source.width;left+=1)for(let y=top+1;y<bottom;y+=1)if(data[4*(y*source.width+left)+3])break leftLoop;let right=source.width-1;rightLoop:for(;right>=left;right-=1)for(let y=top+1;y<bottom;y+=1)if(data[4*(y*source.width+right)+3])break rightLoop;return cropCanvas(source,left,top,right-left+1||1,bottom-top+1||1)},cutoutCanvasIntoCells=(source,offsetH,offsetV,hCells,vCells,cellWidth,cellHeight)=>{const cells=[];for(let y=0;y<vCells;y+=1){const row=[];for(let x=0;x<hCells;x+=1)row.push(cropCanvas(source,offsetH+x*cellWidth,offsetV+y*cellHeight,cellWidth,cellHeight));cells.push(row)}return cells},urlToImg=(url,cb)=>{const img=document.createElement("img");img.src=url,img.onload=()=>cb(img)},mergeImages=(w,h,srcs)=>new Promise((resolve=>{const canvas=document.createElement("canvas");canvas.width=w,canvas.height=h;const ctx=canvas.getContext("2d");if(!ctx)throw new Error("Failed to get rendering context.");let ix=0;const img=document.createElement("img");img.onload=()=>{ctx.drawImage(img,0,0,w,h),ix+=1,ix===srcs.length?resolve(canvas):img.src=srcs[ix]},img.src=srcs[0]}))},"./src/utils/file.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A5:()=>prepareDownloadFile,AO:()=>extension,Bv:()=>loadFileAsBlobURL});var jszip__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/jszip/dist/jszip.min.js");const extension=blob=>blob.type.split("/")[1],prepareDownloadFile=images=>{if(1===images.length&&1===images[0].length)return Promise.resolve(images[0][0]);{const zip=new jszip__WEBPACK_IMPORTED_MODULE_0__;return images.forEach(((row,i)=>row.forEach(((cell,j)=>{zip.file(`${i+1}-${j+1}.${extension(cell)}`,cell)})))),zip.generateAsync({type:"blob"})}},loadFileAsBlobURL=file=>new Promise(((resolve,reject)=>{const reader=new FileReader;reader.onload=e=>{e.target&&e.target.result?resolve(e.target.result):reject(new Error("Failed to load file"))},reader.readAsDataURL(file)}))},"./src/components/icons/File.vue":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>File});var vue_esm_bundler=__webpack_require__("./node_modules/vue/dist/vue.esm-bundler.js");const _withScopeId=n=>((0,vue_esm_bundler.dD)("data-v-7c0df149"),n=n(),(0,vue_esm_bundler.Cn)(),n),_hoisted_1={class:"icon",xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},_hoisted_4=[_withScopeId((()=>(0,vue_esm_bundler._)("path",{d:"M0 0h24v24H0V0z",fill:"none"},null,-1))),_withScopeId((()=>(0,vue_esm_bundler._)("path",{d:"M8 16h8v2H8zm0-4h8v2H8zm6-10H6c-1.1 0-2 .9-2 2v16c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm4 18H6V4h7v5h5v11z"},null,-1)))];var injectStylesIntoStyleTag=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),styleDomAPI=__webpack_require__("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),styleDomAPI_default=__webpack_require__.n(styleDomAPI),insertBySelector=__webpack_require__("./node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithoutAttributes=__webpack_require__("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),setAttributesWithoutAttributes_default=__webpack_require__.n(setAttributesWithoutAttributes),insertStyleElement=__webpack_require__("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),styleTagTransform=__webpack_require__("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),styleTagTransform_default=__webpack_require__.n(styleTagTransform),Filevue_type_style_index_0_id_7c0df149_scoped_true_lang_css=__webpack_require__("./node_modules/css-loader/dist/cjs.js??clonedRuleSet-10.use[1]!./node_modules/@storybook/preset-vue3-webpack/node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/@storybook/preset-vue3-webpack/node_modules/vue-loader/dist/index.js??ruleSet[0]!./src/components/icons/File.vue?vue&type=style&index=0&id=7c0df149&scoped=true&lang=css"),options={};options.styleTagTransform=styleTagTransform_default(),options.setAttributes=setAttributesWithoutAttributes_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=styleDomAPI_default(),options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(Filevue_type_style_index_0_id_7c0df149_scoped_true_lang_css.Z,options);Filevue_type_style_index_0_id_7c0df149_scoped_true_lang_css.Z&&Filevue_type_style_index_0_id_7c0df149_scoped_true_lang_css.Z.locals&&Filevue_type_style_index_0_id_7c0df149_scoped_true_lang_css.Z.locals;const script={},__exports__=(0,__webpack_require__("./node_modules/@storybook/preset-vue3-webpack/node_modules/vue-loader/dist/exportHelper.js").Z)(script,[["render",function render(_ctx,_cache){return(0,vue_esm_bundler.wg)(),(0,vue_esm_bundler.iD)("svg",_hoisted_1,_hoisted_4)}],["__scopeId","data-v-7c0df149"]]),File=__exports__;__exports__.__docgenInfo={displayName:"File",description:"",tags:{},sourceFiles:["/home/runner/work/MFM-MOJI/MFM-MOJI/src/components/icons/File.vue"]}},"./src/components/inputs/FileSelect.vue":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>FileSelect});var vue_esm_bundler=__webpack_require__("./node_modules/vue/dist/vue.esm-bundler.js");const _hoisted_1=["accept"],_hoisted_2={key:0,class:"file"};var canvas=__webpack_require__("./src/utils/canvas.ts"),file=__webpack_require__("./src/utils/file.ts"),Button=__webpack_require__("./src/components/inputs/Button.vue"),File=__webpack_require__("./src/components/icons/File.vue");const FileSelectvue_type_script_lang_ts=(0,vue_esm_bundler.aZ)({components:{Button:Button.Z,File:File.Z},props:{label:{type:String,default:void 0},type:{type:String,required:!0},name:{type:String,default:""}},emits:["load"],data:()=>({file:null}),computed:{accept(){return"img"===this.type?"image/*":"font"===this.type?"font/otf,font/ttf,font/woff":null}},methods:{onClick(){this.$refs.input.click()},onChange(e){e.target.files[0]&&(this.file=e.target.files[0],"img"===this.type&&(0,file.Bv)(this.file).then((blobUrl=>{(0,canvas.oh)(blobUrl,(img=>{0!==img.naturalWidth&&0!==img.naturalHeight&&this.$emit("load",img)}))})))}}});var injectStylesIntoStyleTag=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),styleDomAPI=__webpack_require__("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),styleDomAPI_default=__webpack_require__.n(styleDomAPI),insertBySelector=__webpack_require__("./node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithoutAttributes=__webpack_require__("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),setAttributesWithoutAttributes_default=__webpack_require__.n(setAttributesWithoutAttributes),insertStyleElement=__webpack_require__("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),styleTagTransform=__webpack_require__("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),styleTagTransform_default=__webpack_require__.n(styleTagTransform),FileSelectvue_type_style_index_0_id_9c73c30c_scoped_true_lang_css=__webpack_require__("./node_modules/css-loader/dist/cjs.js??clonedRuleSet-10.use[1]!./node_modules/@storybook/preset-vue3-webpack/node_modules/vue-loader/dist/stylePostLoader.js!./node_modules/@storybook/preset-vue3-webpack/node_modules/vue-loader/dist/index.js??ruleSet[0]!./src/components/inputs/FileSelect.vue?vue&type=style&index=0&id=9c73c30c&scoped=true&lang=css"),options={};options.styleTagTransform=styleTagTransform_default(),options.setAttributes=setAttributesWithoutAttributes_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=styleDomAPI_default(),options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(FileSelectvue_type_style_index_0_id_9c73c30c_scoped_true_lang_css.Z,options);FileSelectvue_type_style_index_0_id_9c73c30c_scoped_true_lang_css.Z&&FileSelectvue_type_style_index_0_id_9c73c30c_scoped_true_lang_css.Z.locals&&FileSelectvue_type_style_index_0_id_9c73c30c_scoped_true_lang_css.Z.locals;const __exports__=(0,__webpack_require__("./node_modules/@storybook/preset-vue3-webpack/node_modules/vue-loader/dist/exportHelper.js").Z)(FileSelectvue_type_script_lang_ts,[["render",function render(_ctx,_cache,$props,$setup,$data,$options){const _component_Button=(0,vue_esm_bundler.up)("Button"),_component_File=(0,vue_esm_bundler.up)("File");return(0,vue_esm_bundler.wg)(),(0,vue_esm_bundler.iD)(vue_esm_bundler.HY,null,[(0,vue_esm_bundler._)("input",{ref:"input",type:"file",style:{display:"none"},accept:_ctx.accept,onChange:_cache[0]||(_cache[0]=(...args)=>_ctx.onChange&&_ctx.onChange(...args))},null,40,_hoisted_1),(0,vue_esm_bundler.Wm)(_component_Button,{type:"dashed",name:_ctx.name,onClick:_ctx.onClick},{default:(0,vue_esm_bundler.w5)((()=>[(0,vue_esm_bundler.WI)(_ctx.$slots,"default",{},void 0,!0)])),_:3},8,["name","onClick"]),_ctx.file?((0,vue_esm_bundler.wg)(),(0,vue_esm_bundler.iD)("div",_hoisted_2,[(0,vue_esm_bundler.Wm)(_component_File),(0,vue_esm_bundler.Uk)(" "+(0,vue_esm_bundler.zw)(_ctx.file.name),1)])):(0,vue_esm_bundler.kq)("",!0)],64)}],["__scopeId","data-v-9c73c30c"]]),FileSelect=__exports__;__exports__.__docgenInfo={exportName:"default",displayName:"FileSelect",description:"",tags:{},props:[{name:"label",type:{name:"string"},defaultValue:{func:!1,value:"undefined"}},{name:"type",type:{name:"string"},required:!0},{name:"name",type:{name:"string"},defaultValue:{func:!1,value:'""'}}],events:[{name:"load",type:{names:["undefined"]}}],slots:[{name:"default"}],sourceFiles:["/home/runner/work/MFM-MOJI/MFM-MOJI/src/components/inputs/FileSelect.vue"]}}}]);